getcitations.R
==============

## A simple Rscript for localized `.bib` files

`getcitations.R` is an R script for extracting pandoc-styled citations from a markdown file to create a local .bib file from a master BibTeX library.

The script searches through [Pandoc-styled markdown][pandoc] documents for [citation keys][citekeys]
and pulls the corresponding citation from a central `.bib` file.

For me, this file is generated by Mendeley and automatically contains every
article in my library. But Mendeley adds lots of unnecessary entries; thus 
`getcitations.R` keeps only the minimum required entries. 
Add keywords to the `keep` variable to suite your needs.

### Usage

```
> Rscript getcitations.R <in doc file> <out bib file>
```

**WARNING! I assume all synchronization occurs through the central file, so
         the output file is blindly overwritten.**

To use this script, I recommend the following:

- Copy `getcitations.*` to `~/.pandoc/`.
- Add an alias for `getcitations.sh` to your `~/.bash_profile`.
- Add a symlink called `library.bib` pointing to your central BibTeX file by running `ln -s /path/to/central/library.bib` from `~/.pandoc`.

`getcitations.sh` only requires the markdown file as an argument.
The extension is automatically stripped and the output will be `$name.bib`.

### Behind the scenes

Following the [pandoc citation style][citekeys], the script looks for citations like: `@CitationKey`

Citations start with `[`, a space or at the begining of a line,
followed by an `@`, the citation key with any punctuation + alphanum chars
and end with a space, `]`, `;`, `,` or at the end of a line.

BibTeX entries start on lines like `@<type>{CitationKey,`
and end with a line with a single closing bracket `}`.


---

By Garrick Aden-Buie: <http://garrickadenbuie.com>

[pandoc]: http://johnmacfarlane.net/pandoc/ 
[citekeys]: http://johnmacfarlane.net/pandoc/README.html#citations 
